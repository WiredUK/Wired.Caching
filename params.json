{"name":"Wired.Caching","tagline":"A package to simplify caching in your .Net projects","body":"#Wired.Caching#\r\n\r\nThis is a package to simplify caching in your .Net projects. It started as a simple function but has become useful enough for me to drop into a library of it's own. \r\n\r\n##Usage##\r\n\r\n1. Add a reference to this library (duh!) by either:\r\n\r\n    a. Downloading this codebase, or, I recommend;\r\n\r\n    b. Use the [Nuget package](https://www.nuget.org/packages/Wired.Caching) by using the Nuget Package Manager in Visual Studio or running this in the package manager console:\r\n\r\n        Install-Package Wired.Caching\r\n\r\n2. Create an instance of the cache service:\r\n\r\n\t```c#\r\n    //This can go anywhere, or preferably be injected\r\n    var cacheService = new InMemoryCache();\r\n\t```\r\n\r\n3. Replace code where you need something cached. For example this:\r\n\r\n\t```c#\r\n    var zombies = context.People\r\n        .Where(p => p.IsWalking && p.IsDead)\r\n        .ToList();\r\n\t```\r\n\r\n\tWould be replaced with something like this:\r\n\r\n\t```c#\r\n    var zombies = cacheService.Get(\r\n        \"zombies\",\r\n        () => context.People\r\n                  .Where(p => p.IsWalking && p.IsDead)\r\n                  .ToList(),\r\n        600);\r\n\t```\r\n\r\n\tOr you can use the slightly shorter lambda syntax:\r\n\r\n\t```c#\r\n    var zombies = cacheService.Get(\r\n        \"zombies\",\r\n        context.People\r\n            .Where(p => p.IsWalking && p.IsDead)\r\n            .ToList,\r\n        600);\r\n\t```\r\n\r\n##Caveat##\r\n\r\nThere's always a [catch](http://shouldiblamecaching.com/) right? The main thing you need to be concerned about is when caching something that uses deferred execution. A database context is a good example here, hence why my example ends with `ToList()`. That materialises the query so you are caching the results and not an `IQueryable` interface. If you forget to do that, you will probably end up with errors telling you that your context has gone away or disconnected.\r\n\r\n#Wired.Caching.Mvc#\r\n\r\nSo now you want to use caching in your MVC project? Use this package to simplify that even further. Have you ever wanted to cache the entire return from an Action method? Well now you can by adding a simple attribute.\r\n\r\n##Usage##\r\n\r\nSo here is an example (but very boring) action:\r\n\r\n```c#\r\npublic ActionResult Index()\r\n{ \r\n\treturn View();\r\n}\r\n```\r\n\r\nSo how do we make it cached? Just add the `WiredCache` attribute, like this:\r\n\r\n```c#\r\n[WiredCache(600)]\r\npublic ActionResult Index()\r\n{ \r\n\treturn View();\r\n}\r\n```\r\n\r\nAnd now that action will not be called more than once every 600 seconds. \r\n\r\nCan we get a bit more clever? Sure, what happens if your action has parameters and each variation of parameter has a different output that you want to cache? Simple, just use the `KeyOn` property. Either specify a comma seperated list of parameter names or use `*` to use them all. So lets say you have an action that has a single parameter that you don't care about, just do this:\r\n\r\n```c#\r\n[WiredCache(600, KeyOn = \"id\")]\r\npublic ActionResult GetProduct(int id, string ignoreThisParameter)\r\n{ \r\n\treturn View();\r\n}\r\n```\r\n\r\nNow what happens when inside your action method, the output is different depending on the user that is logged in, perhaps your `Index` action displays the users name and some specific content to them? That's easy too, just use the `KeyOnUser` property, like this:\r\n\r\n```c#\r\n[WiredCache(600, KeyOnUser = true)]\r\npublic ActionResult Index()\r\n{ \r\n\treturn View();\r\n}\r\n```\r\n\r\nBut typing `KeyOnUser = true` every time is boring right? Wouldn't it be nice if you could set it once somewhere and forget? Easy! Just configure in your `web.config`. First add in a new config section:\r\n\r\n```xml\r\n<configSections>\r\n    <section name=\"wiredCaching\" \r\n             type=\"Wired.Caching.Mvc.CachingConfigSection,Wired.Caching.Mvc\"/>\r\n</configSections>\r\n```\r\nThen somewhere else in your config, add this:\r\n\r\n```xml\r\n<wiredCaching alwaysKeyOnUser=\"true\" />\r\n```","google":"UA-67803092-1","note":"Don't delete this file! It's used internally to help with page regeneration."}